<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EcoPowerPlus Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
/* Main CSS */
:root {
  /* Primary colors */
  --primary-50: #e8f5e9;
  --primary-100: #c8e6c9;
  --primary-200: #a5d6a7;
  --primary-300: #81c784;
  --primary-400: #66bb6a;
  --primary-500: #4caf50;
  --primary-600: #43a047;
  --primary-700: #388e3c;
  --primary-800: #2e7d32;
  --primary-900: #1b5e20;
  
  /* Secondary colors */
  --secondary-50: #e1f5fe;
  --secondary-100: #b3e5fc;
  --secondary-200: #81d4fa;
  --secondary-300: #4fc3f7;
  --secondary-400: #29b6f6;
  --secondary-500: #03a9f4;
  --secondary-600: #039be5;
  --secondary-700: #0288d1;
  --secondary-800: #0277bd;
  --secondary-900: #01579b;
  
  /* Accent colors */
  --accent-50: #fff8e1;
  --accent-100: #ffecb3;
  --accent-200: #ffe082;
  --accent-300: #ffd54f;
  --accent-400: #ffca28;
  --accent-500: #ffc107;
  --accent-600: #ffb300;
  --accent-700: #ffa000;
  --accent-800: #ff8f00;
  --accent-900: #ff6f00;
  
  /* Earth tones */
  --earth-50: #efebe9;
  --earth-100: #d7ccc8;
  --earth-200: #bcaaa4;
  --earth-300: #a1887f;
  --earth-400: #8d6e63;
  --earth-500: #795548;
  --earth-600: #6d4c41;
  --earth-700: #5d4037;
  --earth-800: #4e342e;
  --earth-900: #3e2723;
  
  /* Status colors */
  --success-500: #4caf50;
  --warning-500: #ff9800;
  --error-500: #f44336;
  --info-500: #2196f3;
  
  /* Neutral colors */
  --neutral-50: #fafafa;
  --neutral-100: #f5f5f5;
  --neutral-200: #eeeeee;
  --neutral-300: #e0e0e0;
  --neutral-400: #bdbdbd;
  --neutral-500: #9e9e9e;
  --neutral-600: #757575;
  --neutral-700: #616161;
  --neutral-800: #424242;
  --neutral-900: #212121;
  
  /* Layout */
  --spacing-1: 0.25rem;
  --spacing-2: 0.5rem;
  --spacing-3: 0.75rem;
  --spacing-4: 1rem;
  --spacing-6: 1.5rem;
  --spacing-8: 2rem;
  --spacing-12: 3rem;
  --spacing-16: 4rem;
  
  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  
  /* Border radius */
  --radius-sm: 0.25rem;
  --radius-md: 0.5rem;
  --radius-lg: 1rem;
  
  /* Font family */
  --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  
  /* Base theme (light) */
  --bg-primary: var(--neutral-50);
  --bg-secondary: white;
  --bg-tertiary: var(--neutral-100);
  --text-primary: var(--neutral-900);
  --text-secondary: var(--neutral-700);
  --text-tertiary: var(--neutral-500);
  --border-color: var(--neutral-200);
}

/* Dark theme */
.dark-theme {
  --bg-primary: var(--neutral-900);
  --bg-secondary: var(--neutral-800);
  --bg-tertiary: var(--neutral-700);
  --text-primary: var(--neutral-50);
  --text-secondary: var(--neutral-300);
  --text-tertiary: var(--neutral-500);
  --border-color: var(--neutral-700);
}

/* CSS Reset */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-size: 16px;
}

body {
  font-family: var(--font-family);
  background-color: var(--bg-primary);
  color: var(--text-primary);
  transition: background-color 0.3s ease, color 0.3s ease;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

h1, h2, h3, h4, h5, h6 {
  line-height: 1.2;
  margin-bottom: var(--spacing-4);
  font-weight: 700;
  color: var(--text-primary);
}

h1 {
  font-size: 2rem;
}

h2 {
  font-size: 1.5rem;
}

h3 {
  font-size: 1.25rem;
}

p {
  margin-bottom: var(--spacing-4);
}

a {
  color: var(--primary-600);
  text-decoration: none;
  transition: color 0.2s ease;
}

a:hover {
  color: var(--primary-800);
}

/* Buttons */
button, .btn-primary, .btn-secondary {
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-2) var(--spacing-4);
  border-radius: var(--radius-md);
  font-weight: 500;
  transition: all 0.2s ease;
  border: none;
  font-family: var(--font-family);
}

.btn-primary {
  background-color: var(--primary-600);
  color: white;
}

.btn-primary:hover {
  background-color: var(--primary-700);
}

.btn-secondary {
  background-color: var(--bg-tertiary);
  color: var(--text-secondary);
}

.btn-secondary:hover {
  background-color: var(--neutral-200);
}

button i, .btn-primary i, .btn-secondary i {
  margin-right: var(--spacing-2);
}

/* Theme toggle */
.theme-toggle {
  position: fixed;
  top: var(--spacing-4);
  right: var(--spacing-4);
  z-index: 100;
}

.theme-toggle input {
  opacity: 0;
  width: 0;
  height: 0;
}

.theme-toggle label {
  cursor: pointer;
  width: 60px;
  height: 30px;
  background-color: var(--bg-tertiary);
  display: flex;
  border-radius: 30px;
  align-items: center;
  justify-content: space-between;
  padding: 0 var(--spacing-2);
  position: relative;
  transition: all 0.3s ease;
}

.theme-toggle label:after {
  content: '';
  position: absolute;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background-color: var(--primary-500);
  top: 3px;
  left: 3px;
  transition: all 0.3s ease;
}

.theme-toggle input:checked + label:after {
  transform: translateX(29px);
}

.theme-toggle .fa-sun {
  color: var(--accent-500);
}

.theme-toggle .fa-moon {
  color: var(--secondary-700);
}

/* Dashboard styles */
.dashboard-container {
  max-width: 1440px;
  margin: 0 auto;
  padding: var(--spacing-8);
}

.dashboard-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-8);
  padding-bottom: var(--spacing-4);
  border-bottom: 1px solid var(--border-color);
}

.logo {
  display: flex;
  align-items: center;
}

.logo i {
  font-size: 2rem;
  color: var(--primary-500);
  margin-right: var(--spacing-3);
}

.logo h1 {
  margin-bottom: 0;
}

.header-controls {
  display: flex;
  align-items: center;
  gap: var(--spacing-4);
}

.date-range {
  display: flex;
  align-items: center;
  padding: var(--spacing-2) var(--spacing-4);
  background-color: var(--bg-secondary);
  border-radius: var(--radius-md);
  border: 1px solid var(--border-color);
}

.date-range i {
  margin-right: var(--spacing-2);
  color: var(--primary-600);
}

/* Charts styles */
.charts-section {
  margin-bottom: var(--spacing-8);
}

.main-chart-container {
  background-color: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-6);
  margin-bottom: var(--spacing-6);
  box-shadow: var(--shadow-md);
}

.chart-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-6);
}

.chart-header h3 {
  margin-bottom: 0;
}

.chart-controls {
  display: flex;
  gap: var(--spacing-2);
}

.btn-chart {
  background-color: var(--bg-tertiary);
  color: var(--text-secondary);
  padding: var(--spacing-2) var(--spacing-4);
  border-radius: var(--radius-md);
  font-size: 0.875rem;
  transition: all 0.2s ease;
}

.btn-chart:hover {
  background-color: var(--primary-100);
  color: var(--primary-700);
}

.btn-chart.active {
  background-color: var(--primary-100);
  color: var(--primary-700);
  font-weight: 600;
}

.chart-wrapper {
  position: relative;
  height: 300px;
  width: 100%;
}

.secondary-charts {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--spacing-6);
}

.chart-container {
  background-color: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-6);
  box-shadow: var(--shadow-md);
}

.chart-container .chart-wrapper {
  height: 240px;
}

.chart-legend {
  display: flex;
  gap: var(--spacing-4);
}

.legend-item {
  display: flex;
  align-items: center;
  font-size: 0.875rem;
  color: var(--text-secondary);
}

.color-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  margin-right: var(--spacing-2);
  display: inline-block;
}

.color-dot.before {
  background-color: var(--secondary-300);
}

.color-dot.after {
  background-color: var(--secondary-600);
}

.color-dot.temp {
  background-color: var(--accent-500);
}

.color-dot.humid {
  background-color: var(--primary-400);
}

/* Table styles */
.table-section {
  background-color: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-6);
  box-shadow: var(--shadow-md);
}

.table-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-6);
}

.table-header h2 {
  margin-bottom: 0;
}

.table-controls {
  display: flex;
  gap: var(--spacing-4);
  align-items: center;
}

.search-container {
  position: relative;
}

.search-container i {
  position: absolute;
  left: var(--spacing-3);
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-tertiary);
}

.search-container input {
  padding: var(--spacing-2) var(--spacing-2) var(--spacing-2) var(--spacing-8);
  border-radius: var(--radius-md);
  border: 1px solid var(--border-color);
  background-color: var(--bg-tertiary);
  color: var(--text-primary);
  font-family: var(--font-family);
  width: 240px;
  transition: all 0.2s ease;
}

.search-container input:focus {
  outline: none;
  border-color: var(--primary-400);
  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
}

.search-container input::placeholder {
  color: var(--text-tertiary);
}

.table-container {
  overflow-x: auto;
  margin-bottom: var(--spacing-6);
}

table {
  width: 100%;
  border-collapse: collapse;
  text-align: left;
}

th {
  font-weight: 600;
  color: var(--text-secondary);
  padding: var(--spacing-3) var(--spacing-4);
  border-bottom: 2px solid var(--border-color);
  position: relative;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

th:hover {
  background-color: var(--bg-tertiary);
}

th i {
  margin-left: var(--spacing-2);
  font-size: 0.75rem;
  opacity: 0.5;
  transition: opacity 0.2s ease;
}

th:hover i {
  opacity: 1;
}

td {
  padding: var(--spacing-3) var(--spacing-4);
  border-bottom: 1px solid var(--border-color);
  color: var(--text-primary);
}

tr:last-child td {
  border-bottom: none;
}

tr {
  transition: background-color 0.2s ease;
}

tr:hover {
  background-color: var(--bg-tertiary);
}

.status-cell {
  display: flex;
  align-items: center;
  font-weight: 500;
  padding: var(--spacing-1) var(--spacing-3);
  border-radius: var(--radius-md);
  width: fit-content;
}

.status-cell.optimal {
  background-color: rgba(76, 175, 80, 0.1);
  color: var(--success-500);
}

.status-cell.warning {
  background-color: rgba(255, 152, 0, 0.1);
  color: var(--warning-500);
}

.status-cell.critical {
  background-color: rgba(244, 67, 54, 0.1);
  color: var(--error-500);
}

.table-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.table-info {
  font-size: 0.875rem;
  color: var(--text-tertiary);
}

.pagination {
  display: flex;
  gap: var(--spacing-1);
}

.btn-page {
  width: 36px;
  height: 36px;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--bg-tertiary);
  color: var(--text-secondary);
  font-size: 0.875rem;
  transition: all 0.2s ease;
}

.btn-page:hover {
  background-color: var(--primary-100);
  color: var(--primary-700);
}

.btn-page.active {
  background-color: var(--primary-600);
  color: white;
}

.btn-page:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-page:disabled:hover {
  background-color: var(--bg-tertiary);
  color: var(--text-secondary);
}

/* Metrics styles */
.metrics-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: var(--spacing-6);
  margin-bottom: var(--spacing-8);
}

.metric-card {
  background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
  border-radius: var(--radius-lg);
  padding: var(--spacing-6);
  box-shadow: var(--shadow-md);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  position: relative;
  overflow: hidden;
}

.metric-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
}

.metric-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 5px;
  background: linear-gradient(90deg, var(--primary-500), var(--secondary-500));
}

.metric-card.energy::before {
  background: linear-gradient(90deg, var(--primary-600), var(--primary-400));
}

.metric-card.water::before {
  background: linear-gradient(90deg, var(--secondary-600), var(--secondary-400));
}

.metric-card.plant::before {
  background: linear-gradient(90deg, var(--accent-600), var(--accent-400));
}

.metric-card.microbial::before {
  background: linear-gradient(90deg, var(--earth-600), var(--earth-400));
}

.metric-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  margin-bottom: var(--spacing-4);
  font-size: 1.5rem;
}

.metric-card.energy .metric-icon {
  background-color: rgba(76, 175, 80, 0.1);
  color: var(--primary-600);
}

.metric-card.water .metric-icon {
  background-color: rgba(3, 169, 244, 0.1);
  color: var(--secondary-600);
}

.metric-card.plant .metric-icon {
  background-color: rgba(255, 193, 7, 0.1);
  color: var(--accent-600);
}

.metric-card.microbial .metric-icon {
  background-color: rgba(121, 85, 72, 0.1);
  color: var(--earth-600);
}

.metric-title {
  font-size: 1rem;
  font-weight: 500;
  color: var(--text-secondary);
  margin-bottom: var(--spacing-2);
}

.metric-value {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: var(--spacing-2);
}

.metric-change {
  display: flex;
  align-items: center;
  font-size: 0.875rem;
  font-weight: 500;
}

.metric-change.positive {
  color: var(--success-500);
}

.metric-change.negative {
  color: var(--error-500);
}

.metric-change i {
  margin-right: var(--spacing-1);
}

/* Footer */
.dashboard-footer {
  margin-top: var(--spacing-12);
  padding-top: var(--spacing-6);
  border-top: 1px solid var(--border-color);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.footer-info p {
  margin-bottom: 0;
  font-size: 0.875rem;
  color: var(--text-tertiary);
}

.footer-links {
  display: flex;
  gap: var(--spacing-4);
}

.footer-links a {
  font-size: 0.875rem;
  color: var(--text-tertiary);
  display: flex;
  align-items: center;
}

.footer-links a:hover {
  color: var(--primary-600);
}

.footer-links a i {
  margin-right: var(--spacing-2);
}

/* Responsive adjustments */
@media (max-width: 1024px) {
  .metrics-container {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .secondary-charts {
    gap: var(--spacing-4);
  }
  
  .search-container input {
    width: 180px;
  }
}

@media (max-width: 768px) {
  html {
    font-size: 14px;
  }
  
  .dashboard-container {
    padding: var(--spacing-2);
  }
  
  .dashboard-header {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .header-controls {
    margin-top: var(--spacing-4);
    width: 100%;
    justify-content: space-between;
  }
  
  .chart-controls {
    flex-wrap: wrap;
  }
  
  .secondary-charts {
    grid-template-columns: 1fr;
    gap: var(--spacing-6);
  }
  
  .chart-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-4);
  }
  
  .table-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-4);
  }
  
  .table-controls {
    width: 100%;
  }
  
  .search-container {
    flex-grow: 1;
  }
  
  .search-container input {
    width: 100%;
  }
  
  .table-footer {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-4);
  }
  
  .pagination {
    width: 100%;
    justify-content: center;
  }
  
  .footer-links {
    flex-direction: column;
    gap: var(--spacing-2);
  }
  
  .dashboard-footer {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-4);
  }
}

@media (max-width: 640px) {
  .metrics-container {
    grid-template-columns: 1fr;
  }
  
  .system-status {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-3);
  }
}

@media (max-width: 480px) {
  html {
    font-size: 12px;
  }
  
  .theme-toggle {
    top: var(--spacing-2);
    right: var(--spacing-2);
  }
  
  .btn-primary, .btn-secondary {
    padding: var(--spacing-2) var(--spacing-3);
  }
  
  .btn-page {
    width: 32px;
    height: 32px;
  }
  
  .pagination {
    gap: var(--spacing-1);
  }
}
  </style>
</head>
<body>
  <div class="theme-toggle">
    <input type="checkbox" id="theme-switch">
    <label for="theme-switch">
      <i class="fas fa-sun"></i>
      <i class="fas fa-moon"></i>
    </label>
  </div>

  <div class="dashboard-container">
    <header class="dashboard-header">
      <div class="logo">
        <i class="fas fa-leaf"></i>
        <h1>EcoPowerPlus</h1>
      </div>
      <div class="header-controls">
        <div class="date-range">
          <i class="fas fa-calendar"></i>
          <span>Last 30 Days</span>
        </div>
        <button class="btn-primary">
          <i class="fas fa-download"></i>
          Export Data
        </button>
      </div>
    </header>

    <main class="dashboard-content">
      <section class="dashboard-overview">
        <h2>System Overview</h2>
        <p>Monitoring sustainable energy production and environmental metrics in real-time.</p>
        <div class="system-status">
          <span class="status-indicator active">
            <i class="fas fa-circle"></i> System Active
          </span>
          <span class="last-updated">Last updated: <time id="last-updated-time">Just now</time></span>
        </div>
      </section>

      <section class="metrics-container" id="metrics-container">
        <!-- Metric cards will be inserted here by JavaScript -->
      </section>

      <section class="charts-section">
        <h2>Real-Time Analytics</h2>
        
        <div class="main-chart-container">
          <div class="chart-header">
            <h3>Energy Performance</h3>
            <div class="chart-controls">
              <button class="btn-chart active" data-period="day">Day</button>
              <button class="btn-chart" data-period="week">Week</button>
              <button class="btn-chart" data-period="month">Month</button>
            </div>
          </div>
          <div class="chart-wrapper">
            <canvas id="energyChart"></canvas>
          </div>
        </div>

        <div class="secondary-charts">
          <div class="chart-container">
            <div class="chart-header">
              <h3>Water Quality</h3>
              <div class="chart-legend">
                <span class="legend-item"><span class="color-dot before"></span>Before Treatment</span>
                <span class="legend-item"><span class="color-dot after"></span>After Treatment</span>
              </div>
            </div>
            <div class="chart-wrapper">
              <canvas id="waterChart"></canvas>
            </div>
          </div>

          <div class="chart-container">
            <div class="chart-header">
              <h3>Environmental Conditions</h3>
              <div class="chart-legend">
                <span class="legend-item"><span class="color-dot temp"></span>Temperature</span>
                <span class="legend-item"><span class="color-dot humid"></span>Humidity</span>
              </div>
            </div>
            <div class="chart-wrapper">
              <canvas id="environmentChart"></canvas>
            </div>
          </div>
        </div>
      </section>

      <section class="table-section">
        <div class="table-header">
          <h2>Recent Measurements</h2>
          <div class="table-controls">
            <div class="search-container">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search measurements..." id="table-search">
            </div>
            <button class="btn-secondary">
              <i class="fas fa-filter"></i>
              Filter
            </button>
          </div>
        </div>
        
        <div class="table-container">
          <table id="measurements-table">
            <thead>
              <tr>
                <th>Time <i class="fas fa-sort"></i></th>
                <th>Voltage (V) <i class="fas fa-sort"></i></th>
                <th>Current (A) <i class="fas fa-sort"></i></th>
                <th>pH Level <i class="fas fa-sort"></i></th>
                <th>Temperature (°C) <i class="fas fa-sort"></i></th>
                <th>Status <i class="fas fa-sort"></i></th>
              </tr>
            </thead>
            <tbody>
              <!-- Table data will be inserted here by JavaScript -->
            </tbody>
          </table>
        </div>
        
        <div class="table-footer">
          <div class="table-info">Showing <span id="showing-entries">10</span> of <span id="total-entries">50</span> entries</div>
          <div class="pagination">
            <button class="btn-page" disabled><i class="fas fa-chevron-left"></i></button>
            <button class="btn-page active">1</button>
            <button class="btn-page">2</button>
            <button class="btn-page">3</button>
            <button class="btn-page">4</button>
            <button class="btn-page">5</button>
            <button class="btn-page"><i class="fas fa-chevron-right"></i></button>
          </div>
        </div>
      </section>
    </main>

    <footer class="dashboard-footer">
      <div class="footer-info">
        <p>© 2025 EcoPowerPlus - Sustainable Energy Solutions</p>
      </div>
      <div class="footer-links">
        <a href="#"><i class="fas fa-question-circle"></i> Help</a>
        <a href="#"><i class="fas fa-cog"></i> Settings</a>
        <a href="#"><i class="fas fa-user-shield"></i> Privacy</a>
      </div>
    </footer>
  </div>

  <script>
    // Sample data for the dashboard
    const dashboardData = {
      // Data for metric cards
      metrics: [
        {
          id: 'energy-production',
          title: 'Energy Production',
          value: '8.72 kWh',
          change: '+12.3%',
          isPositive: true,
          icon: 'fa-bolt',
          class: 'energy'
        },
        {
          id: 'water-purity',
          title: 'Water Purity',
          value: '98.5%',
          change: '+3.2%',
          isPositive: true,
          icon: 'fa-droplet',
          class: 'water'
        },
        {
          id: 'plant-health',
          title: 'Plant Health',
          value: '92.7%',
          change: '-1.8%',
          isPositive: false,
          icon: 'fa-seedling',
          class: 'plant'
        },
        {
          id: 'microbial-activity',
          title: 'Microbial Activity',
          value: '74.9%',
          change: '+5.4%',
          isPositive: true,
          icon: 'fa-microscope',
          class: 'microbial'
        }
      ],
      
      // Data for energy chart
      energyChartData: {
        labels: Array.from({ length: 30 }, (_, i) => `Day ${i + 1}`),
        datasets: [
          {
            label: 'Voltage (V)',
            data: Array.from({ length: 30 }, () => Math.random() * 2 + 11), // Random values between 11-13V
            borderColor: 'rgba(76, 175, 80, 1)',
            backgroundColor: 'rgba(76, 175, 80, 0.1)',
            tension: 0.4,
            fill: false,
            yAxisID: 'y'
          },
          {
            label: 'Current (A)',
            data: Array.from({ length: 30 }, () => Math.random() * 0.5 + 1.5), // Random values between 1.5-2A
            borderColor: 'rgba(3, 169, 244, 1)',
            backgroundColor: 'rgba(3, 169, 244, 0.1)',
            tension: 0.4,
            fill: false,
            yAxisID: 'y1'
          }
        ]
      },
      
      // Data for water quality chart
      waterChartData: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        datasets: [
          {
            label: 'Before Treatment',
            data: [60, 55, 58, 62, 65, 63],
            borderColor: 'rgba(3, 169, 244, 0.6)',
            backgroundColor: 'rgba(3, 169, 244, 0.1)',
            tension: 0.4,
            fill: true
          },
          {
            label: 'After Treatment',
            data: [90, 92, 91, 94, 96, 98],
            borderColor: 'rgba(3, 169, 244, 1)',
            backgroundColor: 'rgba(3, 169, 244, 0.2)',
            tension: 0.4,
            fill: true
          }
        ]
      },
      
      // Data for environment chart
      environmentChartData: {
        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
        datasets: [
          {
            label: 'Temperature (°C)',
            data: [22, 23, 25, 24, 21, 20, 22],
            borderColor: 'rgba(255, 193, 7, 1)',
            backgroundColor: 'rgba(255, 193, 7, 0.1)',
            tension: 0.4,
            fill: false,
            yAxisID: 'y'
          },
          {
            label: 'Humidity (%)',
            data: [40, 45, 42, 50, 55, 58, 52],
            borderColor: 'rgba(76, 175, 80, 1)',
            backgroundColor: 'rgba(76, 175, 80, 0.1)',
            tension: 0.4,
            fill: false,
            yAxisID: 'y1'
          }
        ]
      },
      
      // Data for measurements table
      measurementsData: [
        { time: '2025-04-15 09:00', voltage: 12.4, current: 1.8, ph: 7.2, temperature: 22.5, status: 'optimal' },
        { time: '2025-04-15 08:00', voltage: 12.3, current: 1.7, ph: 7.1, temperature: 22.0, status: 'optimal' },
        { time: '2025-04-15 07:00', voltage: 11.9, current: 1.5, ph: 6.9, temperature: 21.8, status: 'warning' },
        { time: '2025-04-15 06:00', voltage: 12.1, current: 1.6, ph: 7.0, temperature: 21.5, status: 'optimal' },
        { time: '2025-04-15 05:00', voltage: 12.5, current: 1.9, ph: 7.3, temperature: 22.7, status: 'optimal' },
        { time: '2025-04-15 04:00', voltage: 10.8, current: 1.3, ph: 6.6, temperature: 20.2, status: 'critical' },
        { time: '2025-04-15 03:00', voltage: 11.2, current: 1.4, ph: 6.8, temperature: 20.8, status: 'warning' },
        { time: '2025-04-15 02:00', voltage: 12.0, current: 1.7, ph: 7.1, temperature: 21.6, status: 'optimal' },
        { time: '2025-04-15 01:00', voltage: 12.2, current: 1.8, ph: 7.2, temperature: 22.0, status: 'optimal' },
        { time: '2025-04-15 00:00', voltage: 12.4, current: 1.9, ph: 7.3, temperature: 22.5, status: 'optimal' }
      ]
    };

    // Function to format date string
    function formatDate(dateString) {
      const date = new Date(dateString);
      const hours = date.getHours().toString().padStart(2, '0');
      const minutes = date.getMinutes().toString().padStart(2, '0');
      return `${hours}:${minutes}`;
    }

    // Function to get random data for real-time updates
    function getRandomData(baseValue, variation) {
      return (baseValue + (Math.random() * variation * 2 - variation)).toFixed(1);
    }

    // Initialize metric cards
    function initializeMetrics() {
      const metricsContainer = document.getElementById('metrics-container');
      
      // Clear any existing content
      metricsContainer.innerHTML = '';
      
      // Create and append metric cards
      dashboardData.metrics.forEach(metric => {
        const metricCard = document.createElement('div');
        metricCard.className = `metric-card ${metric.class}`;
        metricCard.id = metric.id;
        
        metricCard.innerHTML = `
          <div class="metric-icon">
            <i class="fas ${metric.icon}"></i>
          </div>
          <div class="metric-title">${metric.title}</div>
          <div class="metric-value">${metric.value}</div>
          <div class="metric-change ${metric.isPositive ? 'positive' : 'negative'}">
            <i class="fas ${metric.isPositive ? 'fa-arrow-up' : 'fa-arrow-down'}"></i>
            ${metric.change} from last week
          </div>
        `;
        
        metricsContainer.appendChild(metricCard);
      });
      
      // Add animation to metric cards
      animateMetrics();
    }

    // Initialize GSAP animations
    function initializeAnimations() {
      // Register ScrollTrigger plugin first
      gsap.registerPlugin(ScrollTrigger);
      
      // Animation timeline
      const tl = gsap.timeline();
      
      // Header animation
      tl.from('.dashboard-header', {
        y: -20,
        opacity: 0,
        duration: 0.6,
        ease: 'power3.out'
      });
      
      // Overview section animation
      tl.from('.dashboard-overview', {
        y: 20,
        opacity: 0,
        duration: 0.6,
        ease: 'power3.out'
      }, '-=0.3');
      
      // Set up animations for sections that come into view
      ScrollTrigger.batch('.charts-section, .table-section', {
        onEnter: batch => gsap.to(batch, {
          opacity: 1,
          y: 0,
          stagger: 0.15,
          duration: 0.8,
          ease: 'power3.out'
        }),
        start: 'top 80%',
        once: true
      });
    }

    // Function to animate metric cards
    function animateMetrics() {
      const metrics = document.querySelectorAll('.metric-card');
      
      gsap.from(metrics, {
        y: 30,
        opacity: 0,
        duration: 0.8,
        stagger: 0.1,
        ease: 'power3.out'
      });
    }

    // Function to animate value changes
    function animateValueChange(element, newValue) {
      gsap.to(element, {
        textContent: newValue,
        duration: 1,
        ease: 'power2.out',
        snap: { textContent: 0.1 },
        onUpdate: function() {
          element.textContent = parseFloat(element.textContent).toFixed(1);
        }
      });
    }

    // Hover animations for buttons and interactive elements
    function setupHoverAnimations() {
      // Metric cards hover effect
      gsap.utils.toArray('.metric-card').forEach(card => {
        card.addEventListener('mouseenter', () => {
          gsap.to(card, {
            y: -5,
            boxShadow: '0 10px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04)',
            duration: 0.3,
            ease: 'power2.out'
          });
        });
        
        card.addEventListener('mouseleave', () => {
          gsap.to(card, {
            y: 0,
            boxShadow: '0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06)',
            duration: 0.3,
            ease: 'power2.out'
          });
        });
      });
      
      // Button hover effects
      gsap.utils.toArray('button, .btn-primary, .btn-secondary, .btn-chart, .btn-page').forEach(button => {
        button.addEventListener('mouseenter', () => {
          gsap.to(button, {
            scale: 1.05,
            duration: 0.2,
            ease: 'power1.out'
          });
        });
        
        button.addEventListener('mouseleave', () => {
          gsap.to(button, {
            scale: 1,
            duration: 0.2,
            ease: 'power1.out'
          });
        });
      });
    }

    // Initialize charts
    function initializeCharts() {
      // Chart.js global defaults
      Chart.defaults.font.family = 'Inter, system-ui, sans-serif';
      Chart.defaults.color = getComputedStyle(document.documentElement).getPropertyValue('--text-secondary').trim();
      Chart.defaults.borderColor = getComputedStyle(document.documentElement).getPropertyValue('--border-color').trim();
      Chart.defaults.plugins.tooltip.backgroundColor = getComputedStyle(document.documentElement).getPropertyValue('--bg-secondary').trim();
      Chart.defaults.plugins.tooltip.titleColor = getComputedStyle(document.documentElement).getPropertyValue('--text-primary').trim();
      Chart.defaults.plugins.tooltip.bodyColor = getComputedStyle(document.documentElement).getPropertyValue('--text-secondary').trim();
      Chart.defaults.plugins.tooltip.borderColor = getComputedStyle(document.documentElement).getPropertyValue('--border-color').trim();
      Chart.defaults.plugins.tooltip.borderWidth = 1;

      // Energy performance chart
      const energyCtx = document.getElementById('energyChart').getContext('2d');
      const energyChart = new Chart(energyCtx, {
        type: 'line',
        data: dashboardData.energyChartData,
        options: {
          responsive: true,
          maintainAspectRatio: false,
          interaction: {
            mode: 'index',
            intersect: false
          },
          plugins: {
            legend: {
              position: 'top',
              align: 'end',
              labels: {
                boxWidth: 12,
                usePointStyle: true,
                pointStyle: 'circle'
              }
            },
            tooltip: {
              usePointStyle: true,
              callbacks: {
                label: function(context) {
                  let label = context.dataset.label || '';
                  if (label) {
                    label += ': ';
                  }
                  if (context.parsed.y !== null) {
                    label += context.parsed.y.toFixed(2);
                  }
                  return label;
                }
              }
            }
          },
          scales: {
            x: {
              grid: {
                display: false
              }
            },
            y: {
              type: 'linear',
              display: true,
              position: 'left',
              title: {
                display: true,
                text: 'Voltage (V)'
              },
              suggestedMin: 10,
              suggestedMax: 14
            },
            y1: {
              type: 'linear',
              display: true,
              position: 'right',
              title: {
                display: true,
                text: 'Current (A)'
              },
              grid: {
                drawOnChartArea: false
              },
              suggestedMin: 1,
              suggestedMax: 2.5
            }
          }
        }
      });

      // Water quality chart
      const waterCtx = document.getElementById('waterChart').getContext('2d');
      const waterChart = new Chart(waterCtx, {
        type: 'line',
        data: dashboardData.waterChartData,
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              usePointStyle: true
            }
          },
          scales: {
            x: {
              grid: {
                display: false
              }
            },
            y: {
              suggestedMin: 50,
              suggestedMax: 100,
              title: {
                display: true,
                text: 'Water Quality (%)'
              }
            }
          }
        }
      });

      // Environment chart
      const environmentCtx = document.getElementById('environmentChart').getContext('2d');
      const environmentChart = new Chart(environmentCtx, {
        type: 'line',
        data: dashboardData.environmentChartData,
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              usePointStyle: true
            }
          },
          scales: {
            x: {
              grid: {
                display: false
              }
            },
            y: {
              type: 'linear',
              display: true,
              position: 'left',
              title: {
                display: true,
                text: 'Temperature (°C)'
              },
              suggestedMin: 18,
              suggestedMax: 28
            },
            y1: {
              type: 'linear',
              display: true,
              position: 'right',
              title: {
                display: true,
                text: 'Humidity (%)'
              },
              grid: {
                drawOnChartArea: false
              },
              suggestedMin: 30,
              suggestedMax: 70
            }
          }
        }
      });

      // Handle chart period buttons
      const chartButtons = document.querySelectorAll('.btn-chart');
      chartButtons.forEach(button => {
        button.addEventListener('click', () => {
          chartButtons.forEach(btn => btn.classList.remove('active'));
          button.classList.add('active');
          
          // Simulate data update based on selected period
          const period = button.dataset.period;
          let labels, voltageData, currentData;
          
          switch(period) {
            case 'day':
              labels = Array.from({ length: 24 }, (_, i) => `${i}:00`);
              voltageData = Array.from({ length: 24 }, () => Math.random() * 2 + 11);
              currentData = Array.from({ length: 24 }, () => Math.random() * 0.5 + 1.5);
              break;
            case 'week':
              labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
              voltageData = Array.from({ length: 7 }, () => Math.random() * 2 + 11);
              currentData = Array.from({ length: 7 }, () => Math.random() * 0.5 + 1.5);
              break;
            case 'month':
            default:
              labels = Array.from({ length: 30 }, (_, i) => `Day ${i + 1}`);
              voltageData = Array.from({ length: 30 }, () => Math.random() * 2 + 11);
              currentData = Array.from({ length: 30 }, () => Math.random() * 0.5 + 1.5);
              break;
          }
          
          energyChart.data.labels = labels;
          energyChart.data.datasets[0].data = voltageData;
          energyChart.data.datasets[1].data = currentData;
          energyChart.update();
          
          // Animate the chart update
          gsap.from('.chart-wrapper', {
            opacity: 0.7,
            duration: 0.5,
            ease: 'power2.out'
          });
        });
      });

      // Simulate real-time data updates
      setInterval(() => {
        // Update energy chart with new data point
        const voltageData = energyChart.data.datasets[0].data;
        const currentData = energyChart.data.datasets[1].data;
        
        // Remove the first data point and add a new one
        voltageData.shift();
        voltageData.push(Math.random() * 2 + 11);
        
        currentData.shift();
        currentData.push(Math.random() * 0.5 + 1.5);
        
        energyChart.update('none');
      }, 10000);

      return { energyChart, waterChart, environmentChart };
    }

    // Initialize table
    function initializeTable() {
      const tableBody = document.querySelector('#measurements-table tbody');
      
      // Clear any existing content
      tableBody.innerHTML = '';
      
      // Populate table with data
      dashboardData.measurementsData.forEach(item => {
        const row = document.createElement('tr');
        
        const timeCell = document.createElement('td');
        timeCell.textContent = formatDate(item.time);
        
        const voltageCell = document.createElement('td');
        voltageCell.textContent = item.voltage.toFixed(1);
        
        const currentCell = document.createElement('td');
        currentCell.textContent = item.current.toFixed(1);
        
        const phCell = document.createElement('td');
        phCell.textContent = item.ph.toFixed(1);
        
        const tempCell = document.createElement('td');
        tempCell.textContent = item.temperature.toFixed(1);
        
        const statusCell = document.createElement('td');
        const statusElement = document.createElement('div');
        statusElement.className = `status-cell ${item.status}`;
        statusElement.textContent = item.status.charAt(0).toUpperCase() + item.status.slice(1);
        statusCell.appendChild(statusElement);
        
        row.appendChild(timeCell);
        row.appendChild(voltageCell);
        row.appendChild(currentCell);
        row.appendChild(phCell);
        row.appendChild(tempCell);
        row.appendChild(statusCell);
        
        tableBody.appendChild(row);
      });
      
      // Initialize sorting
      initializeTableSorting();
      
      // Initialize search
      initializeTableSearch();
    }

    // Function to initialize table sorting
    function initializeTableSorting() {
      const tableHeaders = document.querySelectorAll('#measurements-table th');
      
      tableHeaders.forEach((header, index) => {
        header.addEventListener('click', () => {
          // Get the current sort direction
          const sortDirection = header.getAttribute('data-sort') === 'asc' ? 'desc' : 'asc';
          
          // Update sort attribute
          tableHeaders.forEach(th => th.removeAttribute('data-sort'));
          header.setAttribute('data-sort', sortDirection);
          
          // Sort the table
          sortTable(index, sortDirection);
          
          // Update sort icon
          tableHeaders.forEach(th => {
            const icon = th.querySelector('i');
            icon.className = 'fas fa-sort';
          });
          
          const icon = header.querySelector('i');
          icon.className = `fas fa-sort-${sortDirection === 'asc' ? 'up' : 'down'}`;
          
          // Animate the sort
          gsap.from('#measurements-table tbody tr', {
            opacity: 0,
            y: 10,
            stagger: 0.05,
            duration: 0.3,
            ease: 'power2.out'
          });
        });
      });
    }

    // Function to sort the table
    function sortTable(columnIndex, direction) {
      const tableBody = document.querySelector('#measurements-table tbody');
      const rows = Array.from(tableBody.querySelectorAll('tr'));
      
      // Sort rows
      rows.sort((a, b) => {
        const aValue = a.children[columnIndex].textContent;
        const bValue = b.children[columnIndex].textContent;
        
        // Check if values are numeric
        const aNum = parseFloat(aValue);
        const bNum = parseFloat(bValue);
        
        if (!isNaN(aNum) && !isNaN(bNum)) {
          return direction === 'asc' ? aNum - bNum : bNum - aNum;
        }
        
        // Sort as strings
        return direction === 'asc' 
          ? aValue.localeCompare(bValue) 
          : bValue.localeCompare(aValue);
      });
      
      // Reorder the table
      rows.forEach(row => tableBody.appendChild(row));
    }

    // Function to initialize table search
    function initializeTableSearch() {
      const searchInput = document.getElementById('table-search');
      
      searchInput.addEventListener('input', () => {
        const searchTerm = searchInput.value.toLowerCase();
        const rows = document.querySelectorAll('#measurements-table tbody tr');
        
        rows.forEach(row => {
          const text = row.textContent.toLowerCase();
          const display = text.includes(searchTerm) ? '' : 'none';
          row.style.display = display;
        });
        
        // Update showing entries count
        updateEntriesCount();
      });
    }

    // Function to update the entries count
    function updateEntriesCount() {
      const visibleRows = document.querySelectorAll('#measurements-table tbody tr:not([style*="display: none"])');
      const totalRows = document.querySelectorAll('#measurements-table tbody tr');
      
      document.getElementById('showing-entries').textContent = visibleRows.length;
      document.getElementById('total-entries').textContent = totalRows.length;
    }

    // Simulate real-time data updates for the table
    function updateTableData() {
      setInterval(() => {
        // Create a new measurement record
        const newMeasurement = {
          time: new Date().toISOString().replace('T', ' ').substring(0, 16),
          voltage: parseFloat(getRandomData(12, 0.5)),
          current: parseFloat(getRandomData(1.7, 0.2)),
          ph: parseFloat(getRandomData(7.1, 0.2)),
          temperature: parseFloat(getRandomData(22, 1)),
          status: 'optimal'
        };
        
        // Determine status based on values
        if (newMeasurement.voltage < 11.0 || newMeasurement.ph < 6.7) {
          newMeasurement.status = 'critical';
        } else if (newMeasurement.voltage < 11.5 || newMeasurement.ph < 6.9) {
          newMeasurement.status = 'warning';
        }
        
        // Add the new data to the array
        dashboardData.measurementsData.unshift(newMeasurement);
        
        // Remove the last item if more than 10 items
        if (dashboardData.measurementsData.length > 10) {
          dashboardData.measurementsData.pop();
        }
        
        // Update the table
        initializeTable();
        
        // Animate the new row
        const firstRow = document.querySelector('#measurements-table tbody tr:first-child');
        if (firstRow) {
          gsap.from(firstRow, {
            backgroundColor: 'rgba(76, 175, 80, 0.2)',
            duration: 2,
            ease: 'power2.out'
          });
        }
      }, 30000); // Update every 30 seconds
    }

    // Initialize theme functionality
    function initializeTheme() {
      const themeSwitch = document.getElementById('theme-switch');
      const body = document.body;
      
      // Check for saved user preference
      const savedTheme = localStorage.getItem('theme');
      
      // If there's a saved preference, apply it
      if (savedTheme === 'dark') {
        body.classList.add('dark-theme');
        themeSwitch.checked = true;
        updateChartTheme('dark');
      }
      
      // Handle theme toggle
      themeSwitch.addEventListener('change', () => {
        if (themeSwitch.checked) {
          body.classList.add('dark-theme');
          localStorage.setItem('theme', 'dark');
          updateChartTheme('dark');
        } else {
          body.classList.remove('dark-theme');
          localStorage.setItem('theme', 'light');
          updateChartTheme('light');
        }
        
        // Animate theme transition
        gsap.to('.dashboard-container', {
          opacity: 0,
          duration: 0.2,
          onComplete: () => {
            gsap.to('.dashboard-container', {
              opacity: 1,
              duration: 0.2
            });
          }
        });
      });
    }

    // Update chart theme based on current mode
    function updateChartTheme(theme) {
      if (!window.charts) return;
      
      const textColor = theme === 'dark' ? '#e0e0e0' : '#616161';
      const borderColor = theme === 'dark' ? '#424242' : '#e0e0e0';
      const gridColor = theme === 'dark' ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
      
      // Update global defaults
      Chart.defaults.color = textColor;
      Chart.defaults.borderColor = borderColor;
      
      // Update each chart
      Object.values(window.charts).forEach(chart => {
        // Update grid lines color
        chart.options.scales.x.grid.color = gridColor;
        chart.options.scales.y.grid.color = gridColor;
        if (chart.options.scales.y1) {
          chart.options.scales.y1.grid.color = gridColor;
        }
        
        // Update text colors
        chart.options.scales.x.ticks.color = textColor;
        chart.options.scales.y.ticks.color = textColor;
        chart.options.scales.y.title.color = textColor;
        if (chart.options.scales.y1) {
          chart.options.scales.y1.ticks.color = textColor;
          chart.options.scales.y1.title.color = textColor;
        }
        
        // Update the chart
        chart.update();
      });
    }

    // Initialize everything when the DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      // Set initial state for sections that will animate on scroll
      gsap.set('.charts-section, .table-section', { opacity: 0, y: 30 });
      
      // Initialize all components
      initializeTheme();
      initializeAnimations();
      initializeMetrics();
      window.charts = initializeCharts();
      initializeTable();
      setupHoverAnimations();
      
      // Start real-time updates
      updateTableData();
      
      // Set up time updates
      setInterval(() => {
        document.getElementById('last-updated-time').textContent = 'Just now';
      }, 1000);
    });
  </script>
</body>
</html>
